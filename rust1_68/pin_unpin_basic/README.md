# Pin Summary

https://www.sobyte.net/post/2022-07/rust-pin-unpin/

- Asynchronous Programming in Rust

  - https://rust-lang.github.io/async-book/04_pinning/01_chapter.html#summary

  <hr>

## 요약

다음은 Pin 8 요약 에 대한 공식 Async Book에서 발췌한 것입니다 . 이들은 거의 Pin API입니다. 이것이 거의 모든 것입니다.

- T: Unpin(기본값)인 경우 Pin<'a, T>는 &'a mut T와 완전히 동일합니다. 그러한 유형에는 영향을 미치지 않습니다.

- &mut T를 고정된 T로 가져오려면 unsafe if T: !Unpin이 필요합니다.

- 대부분의 표준 라이브러리 유형은 Unpin을 구현합니다. Rust에서 만나는 대부분의 "보통" 유형도 마찬가지입니다. async/await에 의해 생성된 Future는 이 규칙의 예외입니다.

- 기능 플래그를 사용하거나 안정적인 유형에 std::marker::PhantomPinned를 추가하여 유형에 !Unpin 바인딩을 추가할 수 있습니다.

- 스택 또는 힙에 데이터를 고정할 수 있습니다.

- !Unpin 개체를 스택에 고정하려면 unsafe가 필요합니다.

- !Unpin 개체를 힙에 고정하는 데 unsafe가 필요하지 않습니다. Box::pin을 사용하여 이 작업을 수행하는 바로 가기가 있습니다.

- T: !Unpin 고정된 데이터의 경우 메모리가 고정되는 순간부터 drop이 호출될 때까지 메모리가 무효화되거나 용도가 변경되지 않는다는 불변성을 유지해야 합니다. 이것은 핀 계약의 중요한 부분입니다.

## Summary

The following is an excerpt from the official Async Book on Pin 8 summaries as a summary, these are almost the Pin API This is pretty much all there is to it.

- If T: Unpin (which is the default), then Pin<‘a, T> is entirely equivalent to &‘a mut T. in other words: Unpin means it’s OK for this type to be moved even when pinned, so Pin will have no effect on such a type.

- Getting a &mut T to a pinned T requires unsafe if T: !Unpin.

- Most standard library types implement Unpin. The same goes for most “normal” types you encounter in Rust. A Future generated by async/await is an exception to this rule.

- You can add a !Unpin bound on a type on nightly with a feature flag, or by adding std::marker::PhantomPinned to your type on stable.

- You can either pin data to the stack or to the heap.

- Pinning a !Unpin object to the stack requires unsafe

- Pinning a !Unpin object to the heap does not require unsafe. There is a shortcut for doing this using Box::pin.

- For pinned data where T: !Unpin you have to maintain the invariant that its memory will not get invalidated or repurposed from the moment it gets pinned until when drop is called. This is an important part of the pin contract.
